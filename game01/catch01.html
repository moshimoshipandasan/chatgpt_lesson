<!DOCTYPE html>
<html>
<head>
	<title>Falling Object Game</title>
	<style>
		#container {
			width: 400px;
			height: 400px;
			position: relative;
			border: 1px solid black;
		}

		#player {
			width: 50px;
			height: 50px;
			background-color: blue;
			position: absolute;
			bottom: 0;
		}

		.falling-object {
			width: 30px;
			height: 30px;
			background-color: red;
			position: absolute;
		}
	</style>
</head>
<body>
	<div id="container">
		<div id="player"></div>
	</div>

	<script>
		let score = 0;
		let isPlaying = true;

		const container = document.querySelector('#container');
		const player = document.querySelector('#player');

		function createFallingObject() {
			const object = document.createElement('div');
			object.classList.add('falling-object');
			object.style.top = 0;
			object.style.left = Math.floor(Math.random() * container.clientWidth) + 'px';
			container.appendChild(object);

			moveFallingObject(object);
		}

		function moveFallingObject(object) {
			const duration = Math.floor(Math.random() * 3000) + 1000;
			const distance = container.clientHeight - object.offsetTop - object.clientHeight;

			object.animate([
				{ transform: `translateY(0)` },
				{ transform: `translateY(${distance}px)` },
			], {
				duration: duration,
			}).onfinish = () => {
				if (isPlaying) {
					object.remove();
					createFallingObject();
				}
			};
		}

		document.addEventListener('mousemove', e => {
			if (isPlaying) {
				const x = e.clientX - container.offsetLeft - player.offsetWidth / 2;
				player.style.left = Math.min(container.clientWidth - player.offsetWidth, Math.max(0, x)) + 'px';
			}
		});

		function checkCollision() {
			const objects = document.querySelectorAll('.falling-object');
			objects.forEach(object => {
				if (isColliding(player, object)) {
					object.remove();
					score++;
					updateScore();
				}
			});
		}

		function isColliding(a, b) {
			const aRect = a.getBoundingClientRect();
			const bRect = b.getBoundingClientRect();

			return !(
				aRect.bottom < bRect.top ||
				aRect.top > bRect.bottom ||
				aRect.right < bRect.left ||
				aRect.left > bRect.right
			);
		}

		function updateScore() {
			document.querySelector('#score').textContent = `Score: ${score}`;
		}

		function gameover() {
			isPlaying = false;
			alert(`Game over! Your score is ${score}.`);
			location.reload();
		}

		updateScore();
		createFallingObject();
		setInterval(checkCollision, 100);
	</script>

	<p id="score"></p>
</body>
</html>