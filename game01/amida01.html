<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>あみだくじゲーム</title>
  <style>
    table {
      border-collapse: collapse;
    }
    td {
      width: 50px;
      height: 50px;
      border: 1px solid black;
      text-align: center;
      vertical-align: middle;
    }
    .start, .end {
      font-weight: bold;
    }
    .start {
      background-color: lightgreen;
    }
    .end {
      background-color: tomato;
    }
  </style>
</head>
<body>
  <table>
    <tr>
      <td class="start">S</td>
      <td></td>
      <td></td>
      <td class="end">E</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </table>
  <script>
    const start = document.querySelector('.start');
    let current = start;
    let timer = null;

    function move() {
      if (current.nextElementSibling) {
        current = current.nextElementSibling;
        current.style.backgroundColor = 'lightblue';
      } else {
        current = current.parentElement.previousElementSibling.children[current.cellIndex];
        current.style.backgroundColor = 'lightblue';
      }
      if (current.classList.contains('end')) {
        clearInterval(timer);
        setTimeout(() => alert('Congratulations!'), 100);
      }
    }

    start.addEventListener('click', () => {
      timer = setInterval(move, 500);
    });
  </script>
</body>
</html>
